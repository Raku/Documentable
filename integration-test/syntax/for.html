<!doctype html>
<html lang="en">
<head>
    <title>syntax for</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="/Documentable/integration-test/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/Documentable/integration-test/css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="/Documentable/integration-test/">
            <img src="/Documentable/integration-test/images/Camelia.svg"alt="»ö«"id="logo"width="62"height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="" id="try-web-search">try site search</a>)
            </p>
        </div>
        
        <div class="menu">
            
            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item " href="/Documentable/integration-test/language.html"> Language </a>
                    <a class="menu-item " href="/Documentable/integration-test/type.html"> Types </a>
                    <a class="menu-item " href="/Documentable/integration-test/routine.html"> Routines </a>
                    <a class="menu-item " href="/Documentable/integration-test/programs.html"> Programs </a>
                    <a class="menu-item " href="https://webchat.freenode.net/?channels=#raku"> Chat with us </a>
            </div>
            
            
            
        
        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:none;">
            <button title="Edit this page"  class="pencil" onclick="location=''">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">syntax for</h1>
        <p class="subtitle"></p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
    <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#language_documentation_Control_flow">language documentation Control flow</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#(Control_flow)_control_flow_for_for">(Control flow) control flow  for for</a></td></tr>
                                                                                                                                                                                                
</table>
</nav>

        <div class="pod-body ">
            <p>Documentation for syntax <code>for</code> assembled from the following types:</p>
<h1 id="language_documentation_Control_flow"><a class="u" href="#___top" title="go to top of document">language documentation Control flow</a></h1>
<p>From <a href="/Documentable/integration-test/language/control#for">Control flow</a></p>
<h2 id="(Control_flow)_control_flow_for_for"><a href="/Documentable/integration-test/language/control#for">(Control flow) control flow  for for</a></h2>
<p>The <code>for</code> loop iterates over a list, running the statements inside a <a href="/Documentable/integration-test/type/Block">block</a> once on each iteration. If the block takes parameters, the elements of the list are provided as arguments. By default, the block takes one parameter, <code>$_</code>:</p>
<pre class="pod-block-code">my @foo = 1..3;
for @foo { $_.print } # prints each value contained in @foo
for @foo { .print }   # same thing, because .print implies a $_ argument
for @foo { 42.print } # prints 42 as many times as @foo has elements</pre>
<p>Pointy block syntax or a <a href="/Documentable/integration-test/language/variables#The_$CIRCUMFLEX_ACCENT_twigil">placeholder</a> may be used to name the parameter, of course.</p>
<pre class="pod-block-code">my @foo = 1..3;
for @foo -&gt; $item { print $item }
for @foo { print $^item }            # same thing</pre>
<p>Multiple parameters can be declared, in which case the iterator takes as many elements from the list as needed before running the block.</p>
<pre class="pod-block-code">my @foo = 1..3;
for @foo.kv -&gt; $idx, $val { say &quot;$idx: $val&quot; }
my %hash = &lt;a b c&gt; Z=&gt; 1,2,3;
for %hash.kv -&gt; $key, $val { say &quot;$key =&gt; $val&quot; }
for 1, 1.1, 2, 2.1 { say &quot;$^x &lt; $^y&quot; }  # OUTPUT: «1 &lt; 1.1␤2 &lt; 2.1␤»</pre>
<p>Parameters of a pointy block can have default values, allowing the code to handle lists with missing elements.</p>
<pre class="pod-block-code">my @list = 1,2,3,4;
for @list -&gt; $a, $b = &#39;N/A&#39;, $c = &#39;N/A&#39; {
    say &quot;$a $b $c&quot;
}
# OUTPUT: «1 2 3␤4 N/A N/A␤»</pre>
<p>When no parameters are specified for a <code>for</code> loop&#39;s block, <code>when</code> can be used within it similarly to how it&#39;s used in a <code>given</code> block:</p>
<pre class="pod-block-code"># A solution for FizzBuzz:
for 1..100 {
    when * %% 15 { say &#39;FizzBuzz&#39; }
    when * %% 3  { say &#39;Fizz&#39; }
    when * %% 5  { say &#39;Buzz&#39; }
    default      { say $_ }
}</pre>
<p>If the postfix form of <code>for</code> is used, a block is not required and the topic is set for the statement list.</p>
<pre class="pod-block-code">say „I $_ butterflies!“ for &lt;♥ ♥ ♥&gt;;
# OUTPUT: «I ♥ butterflies!␤I ♥ butterflies!␤I ♥ butterflies!␤»</pre>
<p>A <code>for</code> may be used on lazy lists – it will only take elements from the list when they are needed, so to read a file line by line, you could use:</p>
<pre class="pod-block-code">for $*IN.lines -&gt; $line { .say }
</pre>
<p>Iteration variables are always lexical, so you don&#39;t need to use <code>my</code> to give them the appropriate scope. Also, they are read-only aliases. If you need them to be writable, use <code>&lt;-&gt;</code> instead of <code>-&gt;</code>. Alternatively, you can add the <a href="/Documentable/integration-test/type/Signature#index-entry-trait_is_rw"><code>is rw</code></a> trait; this performs a binding operation so assigning to the parameter changes the value of the variable at the caller side. If instead you want to modify copies of the arguments within the block, add <a href="/Documentable/integration-test/type/Signature#index-entry-trait_is_copy"><code>is copy</code></a>.</p>
<pre class="pod-block-code">my @foo = 1..3;
for @foo &lt;-&gt; $value {
    $value = $value %% 2 ?? &quot;Even&quot; !! &quot;Odd&quot;
}

say @foo; # OUTPUT: «[Odd Even Odd]»

@foo = 1..3;
for @foo -&gt; $value is rw {
    $value = $value %% 2 ?? &quot;Even&quot; !! &quot;Odd&quot;
}

say @foo; # OUTPUT: «[Odd Even Odd]»

@foo = 1..3;
my @bar;
for @foo -&gt; $value is copy {
    $value = $value %% 2 ?? &quot;Even&quot; !! &quot;Odd&quot;;
    @bar.push: $value
}

say @foo; # OUTPUT: «[1 2 3]»
say @bar; # OUTPUT: «[Odd Even Odd]»
</pre>
<p>This rule also applies to the topic variable <code>$_</code>, which by default is a read-write alias; it will become read-only if it&#39;s used in a <code>-&gt;</code> loop.</p>
<pre class="pod-block-code">my @foo = 1..3;
for @foo -&gt; $_ { $_.say }

# Error: ...require mutable arguments
for @foo -&gt; $_ { $_++ }</pre>
<p>A <code>for</code> loop can produce a <code>List</code> of the values produced by each run of the attached block. To capture these values, put the for loop in parenthesis or assign them to an array:</p>
<pre class="pod-block-code">(for 1, 2, 3 { $_ * 2 }).say;              # OUTPUT: «(2 4 6)␤»
my @a = do for 1, 2, 3 { $_ * 2 }; @a.say; # OUTPUT: «[2 4 6]␤»
my @b = (for 1, 2, 3 { $_ * 2 }); @b.say;  # OUTPUT: «[2 4 6]␤»</pre>
<p>This implies that, if the results of the loop are not assigned, they will be in a <a href="/Documentable/integration-test/language/contexts#index-entry-sink_context">sink context</a>:</p>
<pre class="pod-block-code">class Sunk {
    has $.titanic;
    method sink {
        say &quot;Sinking $!titanic&quot;;
    }
}
Sunk.new( :titanic($_) ) for ^3;
for 1 {
    say &quot;About to sink&quot;;
    Sunk.new( :titanic($_) );
}
# OUTPUT:
# Sinking 0
# Sinking 1
# Sinking 2
# About to sink
# Sinking 1
</pre>
<p>The first loop creates three elements but they are in a sink context, so its <code>sink</code> method is called. In the second loop, its last statement will be in a sink context, so it will be also sunk (from version 6.d).</p>
<p>The <code>Empty</code> constant will act as a no-op for a loop:</p>
<pre class="pod-block-code">say &quot;Not here&quot; for Empty;
</pre>
<p>Will not do anything. This constant is <a href="/Documentable/integration-test/syntax/Empty">equivalent to a empty Slip or List</a>.</p>
<p>Undefined values will behave in the same way:</p>
<pre class="pod-block-code">my @array := Empty;
.say for @array;
say @array; # OUTPUT: «()␤»
</pre>
<p>Assigning <code>Empty</code> will effectively undefine an <code>Array</code>, using <code>for</code> over an undefined array will not even enter the loop, as shown, effectively behaving in the same way as above when <code>Empty</code> was used directly.</p>
<p>With <code>hyper</code> and <code>race</code>, the <code>for</code> loop is potentially iterated in parallel. See also the documentation for <code>hyper</code> and <code>race</code> in class <a href="/Documentable/integration-test/type/Map">Map</a>.</p>
<pre class="pod-block-code">my $primes_h = hyper for ^10_000 -&gt; $number { $number if $number.is-prime };
say $primes_h.elems;   # OUTPUT: «1229␤»
say $primes_h.tail: 5; # OUTPUT: «(9931 9941 9949 9967 9973)␤»
</pre>
<p>with <code>hyper</code> the order of elements is preserved.</p>
<pre class="pod-block-code">my $primes_r = race for ^10_000 -&gt; $number { $number if $number.is-prime };
say $primes_r.elems; # OUTPUT: «1229␤»
</pre>
<p>Unlike <code>hyper</code>, <code>race</code> does not preserve the order of elements.</p>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p>
            Generated from <a href="https://github.com/Raku/doc/blob/master/doc/">https://github.com/Raku/doc/blob/master/doc/</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="/Documentable/integration-test/js/app.js?v=1"></script>
    <script type="text/javascript" src="/Documentable/integration-test/js/search.js?v=3"></script>
</body>
</html>

