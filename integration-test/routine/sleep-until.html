<!doctype html>
<html lang="en">
<head>
    <title>sub sleep-until</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="/Documentable/integration-test/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/Documentable/integration-test/css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="/Documentable/integration-test/">
            <img src="/Documentable/integration-test/images/Camelia.svg"alt="»ö«"id="logo"width="62"height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="" id="try-web-search">try site search</a>)
            </p>
        </div>
        
        <div class="menu">
            
            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item " href="/Documentable/integration-test/language.html"> Language </a>
                    <a class="menu-item " href="/Documentable/integration-test/type.html"> Types </a>
                    <a class="menu-item selected darker-green" href="/Documentable/integration-test/routine.html"> Routines </a>
                    <a class="menu-item " href="/Documentable/integration-test/programs.html"> Programs </a>
                    <a class="menu-item " href="https://webchat.freenode.net/?channels=#raku"> Chat with us </a>
            </div>
            
            <div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green">
                    <a class="menu-item" href="/Documentable/integration-test/routine.html"> All </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-sub.html"> Sub </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-method.html"> Method </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-term.html"> Term </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-operator.html"> Operator </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-trait.html"> Trait </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-submethod.html"> Submethod </a>
            </div></div></div></div></div></div></div>
        
        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:none;">
            <button title="Edit this page"  class="pencil" onclick="location=''">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">sub sleep-until</h1>
        <p class="subtitle"></p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
    <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#class_Date">class Date</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#(Date)_sub_sleep-until">(Date) sub sleep-until</a></td></tr>
                                                                            
</table>
</nav>

        <div class="pod-body ">
            <p>Documentation for sub <code>sleep-until</code> assembled from the following types:</p>
<h1 id="class_Date"><a class="u" href="#___top" title="go to top of document">class Date</a></h1>
<p>From <a href="/Documentable/integration-test/type/Date#sub_sleep-until">Date</a></p>
<h2 id="(Date)_sub_sleep-until"><a href="/Documentable/integration-test/type/Date#sub_sleep-until">(Date) sub sleep-until</a></h2>
<pre class="pod-block-code">sub sleep-until(Instant $until --&gt; Bool)</pre>
<p>Works similar to <code>sleep</code> but checks the current time and keeps sleeping until the required instant in the future has been reached. It uses internally the <code>sleep-timer</code> method in a loop to ensure that, if accidentally woken up early, it will wait again for the specified amount of time remaining to reach the specified instant. goes back to sleep</p>
<p>Returns <code>True</code> if the <code>Instant</code> in the future has been achieved (either by mean of sleeping or because it is right now), <code>False</code> in the case an <code>Instant</code> in the past has been specified.</p>
<p>To sleep until 10 seconds into the future, one could write something like this:</p>
<pre class="pod-block-code">say sleep-until now+10;   # OUTPUT: «True␤»</pre>
<p>Trying to sleep until a time in the past doesn&#39;t work:</p>
<pre class="pod-block-code">my $instant = now - 5;
say sleep-until $instant; # OUTPUT: «False␤»</pre>
<p>However if we put the instant sufficiently far in the future, the sleep should run:</p>
<pre class="pod-block-code">my $instant = now + 30;
# assuming the two commands are run within 30 seconds of one another...
say sleep-until $instant; # OUTPUT: «True␤»
</pre>
<p>To specify an exact instant in the future, first create a <code>DateTime</code> at the appropriate point in time, and cast to an <code>Instant</code>.</p>
<pre class="pod-block-code">my $instant = DateTime.new(
    year =&gt; 2020,
    month =&gt; 9,
    day =&gt; 1,
    hour =&gt; 22,
    minute =&gt; 5);
say sleep-until $instant.Instant; # True (eventually...)
</pre>
<p>This could be used as a primitive kind of alarm clock. For instance, say you need to get up at 7am on the 4th of September 2015, but for some reason your usual alarm clock is broken and you only have your laptop. You can specify the time to get up (being careful about time zones, since <code>DateTime.new</code> uses UTC by default) as an <code>Instant</code> and pass this to <code>sleep-until</code>, after which you can play an mp3 file to wake you up instead of your normal alarm clock. This scenario looks roughly like this:</p>
<pre class="pod-block-code"># DateTime.new uses UTC by default, so get time zone from current time
my $timezone = DateTime.now.timezone;
my $instant = DateTime.new(
    year =&gt; 2015,
    month =&gt; 9,
    day =&gt; 4,
    hour =&gt; 7,
    minute =&gt; 0,
    timezone =&gt; $timezone
).Instant;
sleep-until $instant;
qqx{mplayer wake-me-up.mp3};
</pre>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p>
            Generated from <a href="https://github.com/Raku/doc/blob/master/doc/">https://github.com/Raku/doc/blob/master/doc/</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="/Documentable/integration-test/js/app.js?v=1"></script>
    <script type="text/javascript" src="/Documentable/integration-test/js/search.js?v=3"></script>
</body>
</html>

