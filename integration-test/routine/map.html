<!doctype html>
<html lang="en">
<head>
    <title>routine map</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="/Documentable/integration-test/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="/Documentable/integration-test/css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="/Documentable/integration-test/">
            <img src="/Documentable/integration-test/images/Camelia.svg"alt="»ö«"id="logo"width="62"height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="" id="try-web-search">try site search</a>)
            </p>
        </div>
        
        <div class="menu">
            
            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item " href="/Documentable/integration-test/language.html"> Language </a>
                    <a class="menu-item " href="/Documentable/integration-test/type.html"> Types </a>
                    <a class="menu-item selected darker-green" href="/Documentable/integration-test/routine.html"> Routines </a>
                    <a class="menu-item " href="/Documentable/integration-test/programs.html"> Programs </a>
                    <a class="menu-item " href="https://webchat.freenode.net/?channels=#raku"> Chat with us </a>
            </div>
            
            <div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green">
                    <a class="menu-item" href="/Documentable/integration-test/routine.html"> All </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-sub.html"> Sub </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-method.html"> Method </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-term.html"> Term </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-operator.html"> Operator </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-trait.html"> Trait </a>
                    <a class="menu-item" href="/Documentable/integration-test/routine-submethod.html"> Submethod </a>
            </div></div></div></div></div></div></div>
        
        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:none;">
            <button title="Edit this page"  class="pencil" onclick="location=''">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">routine map</h1>
        <p class="subtitle"></p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
    <tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="#class_Any">class Any</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="#(Any)_routine_map">(Any) routine map</a></td></tr>
                                                                  <tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="#class_Backtrace">class Backtrace</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">2.1</td><td class="toc-text"><a href="#(Backtrace)_method_map">(Backtrace) method map</a></td></tr>
                     <tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="#class_HyperSeq">class HyperSeq</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">3.1</td><td class="toc-text"><a href="#(HyperSeq)_method_map">(HyperSeq) method map</a></td></tr>
         <tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="#class_RaceSeq">class RaceSeq</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">4.1</td><td class="toc-text"><a href="#(RaceSeq)_method_map">(RaceSeq) method map</a></td></tr>
         <tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="#class_List">class List</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">5.1</td><td class="toc-text"><a href="#(List)_routine_map">(List) routine map</a></td></tr>
                                            <tr class="toc-level-1"><td class="toc-number">6</td><td class="toc-text"><a href="#class_Supply">class Supply</a></td></tr>
   <tr class="toc-level-2"><td class="toc-number">6.1</td><td class="toc-text"><a href="#(Supply)_method_map">(Supply) method map</a></td></tr>
     
</table>
</nav>

        <div class="pod-body ">
            <p>Documentation for routine <code>map</code> assembled from the following types:</p>
<h1 id="class_Any"><a class="u" href="#___top" title="go to top of document">class Any</a></h1>
<p>From <a href="/Documentable/integration-test/type/Any#routine_map">Any</a></p>
<h2 id="(Any)_routine_map"><a href="/Documentable/integration-test/type/Any#routine_map">(Any) routine map</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi method map(\SELF: &amp;block;; :$label, :$item)
multi sub map(&amp;code, +values)
multi method map(Hash:D \hash)
multi method map(Iterable:D \iterable)
multi method map(|c)</pre>
<p><code>map</code> will iterate over the invocant and apply the number of positional parameters of the code object from the invocant per call. The returned values of the code object will become elements of the returned <a href="/Documentable/integration-test/type/Seq">Seq</a>.</p>
<p>The <code>:$label</code> and <code>:$item</code> are useful only internally, since <code>for</code> loops get converted to <code>map</code>s. The <code>:$label</code> takes an existing <a href="/Documentable/integration-test/type/Label">Label</a> to label the <code>.map</code>&#39;s loop with and <code>:$item</code> controls whether the iteration will occur over <code>(SELF,)</code> (if <code>:$item</code> is set) or <code>SELF</code>.</p>
<p>In <code>sub</code> form, it will apply the <code>code</code> block to the <code>values</code>, which will be used as invocant.</p>
<p>The forms with <code>|c</code>, <code>Iterable:D \iterable</code> and <code>Hash:D \hash</code> as signatures will fail with <code>X::Cannot::Map</code>, and are mainly meant to catch common traps.</p>
<p>Inside a <code>for</code> statement that has been sunk, a <code>Seq</code> created by a map will also sink:</p>
<pre class="pod-block-code">say gather for 1 {
    ^3 .map: *.take;
} # OUTPUT: «(0 1 2)␤»
</pre>
<p>In this case, <code>gather</code> sinks the <code>for</code> statement, and the result of sinking the <code>Seq</code> will be iterating over its elements, calling <code>.take</code> on them.</p>
<h1 id="class_Backtrace"><a class="u" href="#___top" title="go to top of document">class Backtrace</a></h1>
<p>From <a href="/Documentable/integration-test/type/Backtrace#method_map">Backtrace</a></p>
<h2 id="(Backtrace)_method_map"><a href="/Documentable/integration-test/type/Backtrace#method_map">(Backtrace) method map</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi method map(Backtrace:D: &amp;block --&gt; Seq:D)</pre>
<p>It invokes <code>&amp;block</code> for each element and gathers the return values in a sequence and returns it.</p>
<p>This program:</p>
<pre class="pod-block-code">sub inner { Backtrace.new.map({ say &quot;{$_.file}: {$_.line}&quot; }); }
sub outer { inner; }
outer;</pre>
<p>results in:</p>
<pre class="pod-block-code">SETTING::src/core.c/Backtrace.pm6: 85
SETTING::src/core.c/Backtrace.pm6: 85
test.p6: 1
test.p6: 2
test.p6: 3
test.p6: 1
</pre>
<h1 id="class_HyperSeq"><a class="u" href="#___top" title="go to top of document">class HyperSeq</a></h1>
<p>From <a href="/Documentable/integration-test/type/HyperSeq#method_map">HyperSeq</a></p>
<h2 id="(HyperSeq)_method_map"><a href="/Documentable/integration-test/type/HyperSeq#method_map">(HyperSeq) method map</a></h2>
<pre class="pod-block-code">method map(HyperSeq:D: $matcher, *%options)</pre>
<p>Uses maps on the <code>HyperSeq</code>, generally created by application of <code>hyper</code> to a preexisting <code>Seq</code>.</p>
<h1 id="class_RaceSeq"><a class="u" href="#___top" title="go to top of document">class RaceSeq</a></h1>
<p>From <a href="/Documentable/integration-test/type/RaceSeq#method_map">RaceSeq</a></p>
<h2 id="(RaceSeq)_method_map"><a href="/Documentable/integration-test/type/RaceSeq#method_map">(RaceSeq) method map</a></h2>
<pre class="pod-block-code">method map(RaceSeq:D: $matcher, *%options)</pre>
<p>Uses maps on the <code>RaceSeq</code>, generally created by application of <code>.race</code> to a preexisting <code>Seq</code>.</p>
<h1 id="class_List"><a class="u" href="#___top" title="go to top of document">class List</a></h1>
<p>From <a href="/Documentable/integration-test/type/List#routine_map">List</a></p>
<h2 id="(List)_routine_map"><a href="/Documentable/integration-test/type/List#routine_map">(List) routine map</a></h2>
<p>Defined as:</p>
<pre class="pod-block-code">multi method map(Hash:D \hash)
multi method map(Iterable:D \iterable)
multi method map(|c)
multi method map(\SELF: &amp;block;; :$label, :$item)
multi sub map(&amp;code, +values)</pre>
<p>Examples applied to lists are included here for the purpose of illustration.</p>
<p>For a list, it invokes <code>&amp;code</code> for each element and gathers the return values in a sequence and returns it. This happens lazily, i.e. <code>&amp;code</code> is only invoked when the return values are accessed.Examples:</p>
<pre class="pod-block-code">say (&#39;hello&#39;, 1, 22/7, 42, &#39;world&#39;).map: { .^name } # OUTPUT: «(Str Int Rat Int Str)␤»
say map *.Str.chars, &#39;hello&#39;, 1, 22/7, 42, &#39;world&#39;; # OUTPUT: «(5 1 8 2 5)␤»
</pre>
<p><code>map</code> inspects the arity of the code object, and tries to pass as many arguments to it as expected:</p>
<pre class="pod-block-code">sub b($a, $b) { &quot;$a before $b&quot; };
say &lt;a b x y&gt;.map(&amp;b).join(&#39;, &#39;);   # OUTPUT: «a before b, x before y␤»</pre>
<p>iterates the list two items at a time.</p>
<p>Note that <code>map</code> does not flatten embedded lists and arrays, so</p>
<pre class="pod-block-code">((1, 2), &lt;a b&gt;).map({ .join(&#39;,&#39;)})</pre>
<p>passes <code>(1, 2)</code> and <code>&lt;a b&gt; </code> in turn to the block, leading to a total of two iterations and the result sequence <code>&quot;1,2&quot;, &quot;a,b&quot;</code>. See <a href="/Documentable/integration-test/type/List#method_flatmap">method flatmap</a> for an alternative that flattens.</p>
<p>If <code>&amp;code</code> is a <a href="/Documentable/integration-test/type/Block">Block</a> loop phasers will be executed and loop control statements will be treated as in loop control flow. Please note that <code>return</code> is executed in the context of its definition. It is not the return statement of the block but the surrounding Routine. Using a <a href="/Documentable/integration-test/type/Routine">Routine</a> will also handle loop control statements and loop phasers. Any <code>Routine</code> specific control statement or phaser will be handled in the context of that <code>Routine</code>.</p>
<pre class="pod-block-code">sub s {
    my &amp;loop-block = {
        return # return from sub s
    };
    say &#39;hi&#39;;
    (1..3).map: &amp;loop-block;
    say &#39;oi‽&#39; # dead code
};
s
# OUTPUT: «hi»</pre>
<h1 id="class_Supply"><a class="u" href="#___top" title="go to top of document">class Supply</a></h1>
<p>From <a href="/Documentable/integration-test/type/Supply#method_map">Supply</a></p>
<h2 id="(Supply)_method_map"><a href="/Documentable/integration-test/type/Supply#method_map">(Supply) method map</a></h2>
<pre class="pod-block-code">method map(Supply:D: &amp;mapper --&gt; Supply:D)</pre>
<p>Returns a new supply that maps each value of the given supply through <code>&amp;mapper</code> and emits it to the new supply.</p>
<pre class="pod-block-code">my $supplier = Supplier.new;
my $all      = $supplier.Supply;
my $double   = $all.map(-&gt; $value { $value * 2 });
$double.tap(&amp;say);
$supplier.emit(4);           # OUTPUT: «8»</pre>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p>
            Generated from <a href="https://github.com/Raku/doc/blob/master/doc/">https://github.com/Raku/doc/blob/master/doc/</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="/Documentable/integration-test/js/app.js?v=1"></script>
    <script type="text/javascript" src="/Documentable/integration-test/js/search.js?v=3"></script>
</body>
</html>

